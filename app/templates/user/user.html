{% extends "basic.html" %}

{% block style %}<link rel="stylesheet"
      href="{{ url_for('static', filename='css/user/user.css')}}"/>{% endblock %}

{% block content %}

    <div id="background3">
        <svg id="evUtMlqiFfX1"
             xmlns="http://www.w3.org/2000/svg"
             xmlns:xlink="http://www.w3.org/1999/xlink"
             viewBox="0 0 1142.23 680"
             shape-rendering="geometricPrecision"
             text-rendering="geometricPrecision">
            <path d="M1169.87,387.2c-6.95,28.15-42.63,42.26-62.62,63.26-37.67,39.58-23,97.38.9,143.67c8,15.5,17.08,31.91,13.69,48.53-4.13,20.33-26.08,35.19-49.13,43.07-42,14.35-92.3,10.93-130.91-8.92-33.36-17.15-57.26-45-91.19-61.42-56.79-27.39-129.07-17-190.74,1.83-43.62,13.35-91.32,30.72-134.67,16.78-30.5-9.82-51.59-33.72-63.08-59-5.54-12.23-9.57-25.47-20.16-35.16-6.3-5.77-14.52-9.86-22.93-13.3-76.88-31.5-174-14.63-248.63-49.57-50.42-23.59-82.71-68.09-97-114.5s-12.63-95.07-9-142.87c2.58-34,7.21-70.22,33.47-96.44c27.78-27.73,75.45-38,118.55-32.77s82.15,24.06,116.52,46.18c43,27.66,82.78,62.09,135.51,73.29c35.91,7.63,73.68,3.45,110.72,2c61.92-2.41,123.86,3,185.43,8.84c30,2.87,60.1,5.88,89.84,10.24q10,1.46,20,3.15c3.34.57,6.68,1.16,10,1.77c2.6.47,5.19,1,7.78,1.47q6.13,1.19,12.22,2.5c11.66,2.5,23.21,5.33,34.64,8.55c39.74,11.21,71.6,31.57,109.13,45.79c24.46,9.27,51.13,11.83,74.29,23.63c28.5,14.49,54.68,39.8,47.37,69.4Z" transform="translate(-28.88-59.45)" opacity="0.1" fill="#00adb5"/>
            <circle r="102.23" transform="translate(939.95 375.52)" fill="#00adb5"/><circle r="102.23" transform="translate(831.23 347.59)" fill="#00adb5"/><circle r="102.23" transform="translate(711.55 348.59)" fill="#00adb5"/><circle r="102.23" transform="translate(672.65 375.52)" fill="#00adb5"/><circle r="102.23" transform="translate(606.82 384.5)" fill="#00adb5"/><circle r="102.23" transform="translate(579.89 303.71)" fill="#00adb5"/><circle r="102.23" transform="translate(609.81 209.95)" fill="#00adb5"/><circle r="102.23" transform="translate(666.66 209.95)" fill="#00adb5"/><circle r="102.23" transform="translate(699.58 168.06)" fill="#00adb5"/><circle r="102.23" transform="translate(783.36 213.94)" fill="#00adb5"/><circle r="102.23" transform="translate(978.85 303.71)" fill="#00adb5"/><circle r="102.23" transform="translate(920 252.84)" fill="#00adb5"/><circle r="102.23" transform="translate(882.1 201.97)" fill="#00adb5"/><circle r="102.23" transform="translate(810.29 125.17)" fill="#00adb5"/><circle r="102.23" transform="translate(943.94 209.95)" fill="#00adb5"/>
            <g opacity="0.1">
            <circle r="102.23" transform="translate(939.95 375.52)"/><circle r="102.23" transform="translate(831.23 347.59)"/><circle r="102.23" transform="translate(711.55 348.59)"/><circle r="102.23" transform="translate(672.65 375.52)"/><circle r="102.23" transform="translate(606.82 384.5)"/><circle r="102.23" transform="translate(579.89 303.71)"/><circle r="102.23" transform="translate(609.81 209.95)"/><circle r="102.23" transform="translate(666.66 209.95)"/><circle r="102.23" transform="translate(699.58 168.06)"/><circle r="102.23" transform="translate(783.36 213.94)"/><circle r="102.23" transform="translate(978.85 303.71)"/><circle r="102.23" transform="translate(920 252.84)"/><circle r="102.23" transform="translate(882.1 201.97)"/><circle r="102.23" transform="translate(810.29 125.17)"/><circle r="102.23" transform="translate(943.94 209.95)"/>
            </g>
            <path d="M918.34,614.12c0,0,62.5-52.53,31.58-127.33L919,475.21L885.45,578.5Z" transform="translate(-28.88-59.45)" fill="#67647e"/>
            <path d="M921.67,471.65l7.4,2.77-32.94,101.41l28.74,31.12c-2.38,2.37-3.86,3.61-3.86,3.61l-32.9-35.62Z" transform="translate(-28.88-59.45)" opacity="0.1"/>
            <path d="M1036.72,603.1c0,0-20.33,20.33-8.85,50.5s-19.67,80.33-19.67,80.33l1-.16c41.75-7.37,62.5-55.12,39.28-90.6-8.68-13.17-15.77-28.65-11.76-40.07Z" transform="translate(-28.88-59.45)" fill="#00adb5"/>
            <path d="M1036.72,603.1c0,0-11.48,24.92,0,45.25s2,77.38-28.53,85.58" transform="translate(-28.88-59.45)" fill="none" stroke="#535461" stroke-miterlimit="10"/>
            <path d="M1072.93,685.33c0,0-23.2-3.69-25.31,17.1s-44.62,23.67-44.62,23.67l.8.53c35.09,23,68.63,14.67,63.57-15.91-1.87-11.37-1.72-22.79,5.56-25.39Z" transform="translate(-28.88-59.45)" fill="#00adb5"/>
            <path d="M1072.93,685.33c0,0-23.2-3.69-25.31,17.1s-44.62,23.67-44.62,23.67l.8.53c35.09,23,68.63,14.67,63.57-15.91-1.87-11.37-1.72-22.79,5.56-25.39Z" transform="translate(-28.88-59.45)" opacity="0.2" fill="#f5f5f5"/>
            <path d="M1072.93,685.33c0,0-18,4-16.53,20.33s-26.74,36-53.39,20.44" transform="translate(-28.88-59.45)" fill="none" stroke="#535461" stroke-miterlimit="10"/>
            <path d="M636.08,504.71l8.12,32.5c0,0,57.37,7.48,95.62,2.78c6.761715-.959289,13.253306-3.3013,19.07-6.88c3.23-1.91,8.33-2.74,15.3,2.48c11.94,9,70.54,81,61.05,155.7-1.514601,11.571753-10.603079,20.688927-22.17,22.24v0c-11.68555,1.592542-22.856638,5.818885-32.67,12.36l-29,19.31l297.35-6.5-30.87-37.37c0,0-21.12-17.87-37.37-19.5-4.74-.47-8.65-4.82-11.81-10.73-18.51-34.65-40.65-67.23-64.65-98.34-17.48-22.66-32.15-46.54-30.78-61.54c3.25-35.75,0-94.24,0-94.24l-61.74-8.12c0,0,8.12,78-66.62,97.49s-108.83-1.64-108.83-1.64Z" transform="translate(-28.88-59.45)" fill="#67647e"/>
            <g opacity="0.1">
            <path d="M686.45,519.34c0,0,34.12,21.12,108.87,1.62s66.62-97.49,66.62-97.49L873.69,425c-.22-5-.39-8-.39-8l-61.74-8.12c0,0,8.12,78-66.62,97.49s-108.87-1.62-108.87-1.62l8.12,32.5c0,0,21.92,2.86,47.7,3.93Z" transform="translate(-28.88-59.45)"/>
            <path d="M830.77,740.51c9.813362-6.541115,20.98445-10.767458,32.67-12.36v0c11.540694-1.532732,20.62206-10.609999,22.16-22.15c9.54-74.7-49.09-146.83-61-155.79-13-9.75-19.5,1.62-19.5,1.62-4.600542,1.207234-9.278061,2.099304-14,2.67c21.06,28,51.19,81.71,44.14,136.87-1.53794,11.540001-10.619306,20.617268-22.16,22.15v0c-11.68555,1.592542-22.856638,5.818885-32.67,12.36l-29,19.31l74.76-1.63Z" transform="translate(-28.88-59.45)"/>
            </g>
            <path d="M1093.54,535.8c-.127549,4.109579-1.413614,8.099499-3.71,11.51-2.314061-3.398335-3.620921-7.38131-3.77-11.49c0-6.35,1.64-11.5,3.71-11.51s3.75,5.14,3.77,11.49Z" transform="translate(-28.88-59.45)" fill="#00adb5"/>
            <path d="M811.25,530.22c-.138318,4.109134-1.43478,8.09558-3.74,11.5-2.30522-3.40442-3.601682-7.390866-3.74-11.5c0-6.35,1.67-11.5,3.74-11.5s3.74,5.15,3.74,11.5Z" transform="translate(-28.88-59.45)" fill="#00adb5"/>
            <path d="M1118.91,643.54c2.30522,3.40442,3.601682,7.390866,3.74,11.5-3.867105-1.396995-7.2608-3.858203-9.79-7.1-3.74-5.14-5.41-10.29-3.74-11.5s6.06,1.97,9.79,7.1Z" transform="translate(-28.88-59.45)" fill="#00adb5"/>
            <path d="M999.45,583.33c-.138318,4.109134-1.43478,8.09558-3.74,11.5-2.30522-3.40442-3.601682-7.390866-3.74-11.5c0-6.35,1.67-11.5,3.74-11.5s3.74,5.17,3.74,11.5Z" transform="translate(-28.88-59.45)" fill="#00adb5"/>
            <path d="M929.57,545.13c-.138318,4.109134-1.43478,8.09558-3.74,11.5-2.30522-3.40442-3.601682-7.390866-3.74-11.5c0-6.35,1.67-11.5,3.74-11.5s3.74,5.15,3.74,11.5Z" transform="translate(-28.88-59.45)" fill="#00adb5"/>
            <path d="M886.22,568.42c1.922562,3.635072,2.778793,7.739434,2.47,11.84-3.706695-1.802325-6.827117-4.617639-9-8.12-3.16-5.51-4.26-10.81-2.47-11.84s5.85,2.61,9,8.12Z" transform="translate(-28.88-59.45)" fill="#00adb5"/>
            <path d="M853.83,674.06c-3.09266,2.711039-6.888538,4.492849-10.95,5.14.90719-4.008618,2.92809-7.679514,5.83-10.59c4.63-4.34,9.54-6.64,10.95-5.14s-1.2,6.25-5.83,10.59Z" transform="translate(-28.88-59.45)" fill="#00adb5"/>
            <path d="M853.83,674.06c-3.09266,2.711039-6.888538,4.492849-10.95,5.14.90719-4.008618,2.92809-7.679514,5.83-10.59c4.63-4.34,9.54-6.64,10.95-5.14s-1.2,6.25-5.83,10.59Z" transform="translate(-28.88-59.45)" opacity="0.1"/>
            <path d="M921.84,667.54c-3.09266,2.711039-6.888538,4.492849-10.95,5.14.90719-4.008618,2.92809-7.679514,5.83-10.59c4.63-4.34,9.54-6.64,10.95-5.14s-1.2,6.24-5.83,10.59Z" transform="translate(-28.88-59.45)" fill="#00adb5"/>
            <path d="M921.84,667.54c-3.09266,2.711039-6.888538,4.492849-10.95,5.14.90719-4.008618,2.92809-7.679514,5.83-10.59c4.63-4.34,9.54-6.64,10.95-5.14s-1.2,6.24-5.83,10.59Z" transform="translate(-28.88-59.45)" opacity="0.1"/>
            <path d="M934.88,736.48c-3.09266,2.711039-6.888538,4.492849-10.95,5.14.904745-4.020454,2.929527-7.702507,5.84-10.62c4.63-4.34,9.54-6.64,10.95-5.14s-1.2,6.27-5.84,10.62Z" transform="translate(-28.88-59.45)" fill="#00adb5"/>
            <path d="M934.88,736.48c-3.09266,2.711039-6.888538,4.492849-10.95,5.14.904745-4.020454,2.929527-7.702507,5.84-10.62c4.63-4.34,9.54-6.64,10.95-5.14s-1.2,6.27-5.84,10.62Z" transform="translate(-28.88-59.45)" opacity="0.1"/>
            <circle r="102.23" transform="translate(939.95 352.58)" fill="#00adb5"/><circle r="102.23" transform="translate(831.23 324.65)" fill="#00adb5"/><circle r="102.23" transform="translate(711.55 325.65)" fill="#00adb5"/><circle r="102.23" transform="translate(672.65 352.58)" fill="#00adb5"/><circle r="102.23" transform="translate(606.82 361.56)" fill="#00adb5"/><circle r="102.23" transform="translate(579.89 280.77)" fill="#00adb5"/><circle r="102.23" transform="translate(609.81 187.01)" fill="#00adb5"/><circle r="102.23" transform="translate(666.66 187.01)" fill="#00adb5"/><circle r="102.23" transform="translate(699.58 145.12)" fill="#00adb5"/><circle r="102.23" transform="translate(783.36 191)" fill="#00adb5"/><circle r="102.23" transform="translate(978.85 280.77)" fill="#00adb5"/><circle r="102.23" transform="translate(920 229.9)" fill="#00adb5"/><circle r="102.23" transform="translate(882.1 179.03)" fill="#00adb5"/><circle r="102.23" transform="translate(810.29 102.23)" fill="#00adb5"/><circle r="102.23" transform="translate(943.94 187.01)" fill="#00adb5"/>
            <path d="M1070.61,262.47c0,0-95.21-45.15-152.82,34.87" transform="translate(-28.88-59.45)" opacity="0.1"/>
            <path d="M820.53,171c0,0-105.32-3.18-126,93.22" transform="translate(-28.88-59.45)" opacity="0.1"/>
            <path d="M689.61,380.16c0,0-95.21-45.16-152.82,34.84" transform="translate(-28.88-59.45)" opacity="0.1"/>
            <g opacity="0.05">
            <path d="M858.09,642.86l-1.71-.57-7.88-9.09c.154392-.430835.171855-.898858.05-1.34Z" transform="translate(-28.88-59.45)"/>
            <path d="M869.07,659.7c-4.568423-1.946605-7.432997-6.54111-7.17-11.5c0-.31,0-.6,0-.88l.16.19l6.26,2.09c-.494405,1.212599-.74583,2.510497-.74,3.82-.063072,2.18782.450809,4.353704,1.49,6.28Z" transform="translate(-28.88-59.45)"/>
            <path d="M808.2,713.36c13.08,4.55,30.79,11.72,36.18,18.69l.4.5c-14.33-9.83-45.8-18.77-45.8-18.77c3.078805.034617,6.157093-.105608,9.22-.42Z" transform="translate(-28.88-59.45)"/>
            </g>
        </svg>
    </div>

    <div class="show-user">
        <div class="user-card">
            <div class="left-card">
                <div class="avatar">
                    <span class="material-symbols-outlined">face</span>
                </div>
                <div class="user-info">
                    <div class="user-username">
                        <h3>Username</h3>
                        {{ user.username }}
                    </div>
                    <div class="user-joined">
                        <h3>Joined</h3>
                        {{ user.created_at }}
                    </div>
                </div>
            </div>
            <div class="right-card">
                <header class="right-card-header">
                    User management
                </header>
                {% if user.username == current_user.username %}
                    <div class="change_profile">
                        <div class="change-password">
                            <form method="post"
                                  action="{{ url_for('user.show_user', user_id=current_user.id) }}"
                                  novalidate>

                                {{ password_form.csrf_token }}

                                Old password:
                                {{ password_form.old_password }}
                                <br>
                            </br>
                            New password:
                            {{ password_form.new_password }}

                            <input class="submit" type="submit" value="Change password" />
                            <br>
                        </br>
                        <br>
                    </br>
                    {% if session["password_message"] %}<div class="back-info">{{ session["password_message"] }}</div>{% endif %}
                </form>
            </div>
            <div class="change-password">
                <form method="post"
                      action="{{ url_for('user.show_user', user_id=current_user.id) }}"
                      novalidate>

                    {{ password_form.csrf_token }}

                    Old Email:
                    {{ password_form.old_password }}
                    <br>
                </br>
                New Email:
                {{ password_form.new_password }}

                <input class="submit" type="submit" value="Change Email" />
                <br>
            </br>
            <br>
        </br>
        {% if session["password_message"] %}<div class="back-info">{{ session["password_message"] }}</div>{% endif %}
    </form>
</div>
<div class="owned-repositories">
    <h3>Owned repositories</h3>
    <ul class="repositories">
        {% for repository in current_user.repositories %}
            <a href="{{ url_for('repository.repository', repository_id=repository.id) }}">
                <li class="repository">{{ repository.name }}</li>
            </a>
        {% endfor %}
    </ul>
</div>
</div>
{% else %}
<div class="shared-repositories"></div>

{% endif %}

</div>
</div>
</div>
{% endblock %}
